<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><link rel=icon type=image/ico href=https://www.arjenwiersma.nl//favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.arjenwiersma.nl//favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.arjenwiersma.nl//favicon-32x32.png><link rel=icon type=image/png sizes=192x192 href=https://www.arjenwiersma.nl//android-chrome-192x192.png><link rel=apple-touch-icon sizes=180x180 href=https://www.arjenwiersma.nl//apple-touch-icon.png><meta name=description content><meta property="og:image" content="https://www.arjenwiersma.nl/social.png"><title>Advent of Code 2023 day 7 | Arjen Wiersma
</title><link rel=canonical href=https://www.arjenwiersma.nl/posts/aoc-2023-day-7/><link rel=stylesheet href=/assets/combined.min.a6824bbee0d90d5af09fed9b70395ce7076b615e315037455d903314e96ef91b.css media=all></head><body class=auto><div class=content><header><div class=header><h1 class=header-title>Arjen Wiersma</h1><div class=flex><p class=small><a href=/>/home</a></p><p class=small><a href=/posts>/posts</a></p><p class=small><a href=/tags>/tags</a></p></div></div></header><main class=main><div class=breadcrumbs><a href=/>Home</a>
<span class=breadcrumbs-separator>> </span><a href=/posts/>Posts</a>
<span class=breadcrumbs-separator>> </span><a class=breadcrumbs-current href=/posts/aoc-2023-day-7/>Advent of Code 2023 day 7</a></div><div><div class=single-intro-container><h1 class=single-title>Advent of Code 2023 day 7</h1><p class=single-readtime><time datetime=2023-12-09T07:18:00+01:00>9 Dec 2023</time></p></div><div class=single-content><p>Today we learned about CamelCards, a game of poker meant to play on the back of a camel. The most interesting part here was the parsing of the cards and figuring out how to properly rank them. Part 2 turned out to be as easy as tracking Jokers.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=font-weight:700>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-weight:700>import</span> (
</span></span><span style=display:flex><span>	<span style=font-style:italic>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=font-style:italic>&#34;sort&#34;</span>
</span></span><span style=display:flex><span>	<span style=font-style:italic>&#34;strconv&#34;</span>
</span></span><span style=display:flex><span>	<span style=font-style:italic>&#34;strings&#34;</span>
</span></span><span style=display:flex><span>	<span style=font-style:italic>&#34;time&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=font-style:italic>&#34;arjenwiersma.nl/aoc/internal/aoc&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-weight:700>type</span> Card <span style=font-weight:700>struct</span> {
</span></span><span style=display:flex><span>	bid    <span>int</span>
</span></span><span style=display:flex><span>	hand   []<span>int</span>
</span></span><span style=display:flex><span>	jokers <span>int</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-weight:700>func</span> (c *Card) strongerThen(o *Card) <span>bool</span> {
</span></span><span style=display:flex><span>	<span style=font-weight:700>for</span> i, v := <span style=font-weight:700>range</span> c.hand {
</span></span><span style=display:flex><span>		<span style=font-weight:700>if</span> v &gt; o.hand[i] {
</span></span><span style=display:flex><span>			<span style=font-weight:700>return</span> <span style=font-weight:700>true</span>
</span></span><span style=display:flex><span>		} <span style=font-weight:700>else</span> <span style=font-weight:700>if</span> v &lt; o.hand[i] {
</span></span><span style=display:flex><span>			<span style=font-weight:700>return</span> <span style=font-weight:700>false</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=font-weight:700>return</span> <span style=font-weight:700>false</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-weight:700>func</span> (c *Card) rank() <span>int</span> {
</span></span><span style=display:flex><span>	freq := make([]<span>int</span>, 15)
</span></span><span style=display:flex><span>	<span style=font-weight:700>for</span> _, v := <span style=font-weight:700>range</span> c.hand {
</span></span><span style=display:flex><span>		<span style=font-weight:700>if</span> v == 1 { <span style=font-style:italic>// skip counting the joker
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>			<span style=font-weight:700>continue</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		freq[v]++
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	sort.Ints(freq)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	freq[len(freq)-1] += c.jokers
</span></span><span style=display:flex><span>	strength := 2 * freq[len(freq)-1]
</span></span><span style=display:flex><span>	<span style=font-style:italic>// full house and 2 pair
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>	<span style=font-weight:700>if</span> freq[len(freq)-2] == 2 {
</span></span><span style=display:flex><span>		strength += 1
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=font-weight:700>return</span> strength
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-weight:700>func</span> NewCard(s <span>string</span>, bid <span>int</span>, p2 <span>bool</span>) *Card {
</span></span><span style=display:flex><span>	c := &amp;Card{}
</span></span><span style=display:flex><span>	c.bid = bid
</span></span><span style=display:flex><span>	c.jokers = 0
</span></span><span style=display:flex><span>	<span style=font-weight:700>for</span> p := 0; p &lt; len(s); p++ {
</span></span><span style=display:flex><span>		<span style=font-weight:700>if</span> s[p]-<span style=font-style:italic>&#39;0&#39;</span> &gt;= 2 &amp;&amp; s[p]-<span style=font-style:italic>&#39;0&#39;</span> &lt;= 9 {
</span></span><span style=display:flex><span>			c.hand = append(c.hand, int(s[p]-<span style=font-style:italic>&#39;0&#39;</span>))
</span></span><span style=display:flex><span>		} <span style=font-weight:700>else</span> {
</span></span><span style=display:flex><span>			x := 10
</span></span><span style=display:flex><span>			<span style=font-weight:700>switch</span> s[p] {
</span></span><span style=display:flex><span>			<span style=font-weight:700>case</span> <span style=font-style:italic>&#39;A&#39;</span>:
</span></span><span style=display:flex><span>				x = 14
</span></span><span style=display:flex><span>			<span style=font-weight:700>case</span> <span style=font-style:italic>&#39;K&#39;</span>:
</span></span><span style=display:flex><span>				x = 13
</span></span><span style=display:flex><span>			<span style=font-weight:700>case</span> <span style=font-style:italic>&#39;Q&#39;</span>:
</span></span><span style=display:flex><span>				x = 12
</span></span><span style=display:flex><span>			<span style=font-weight:700>case</span> <span style=font-style:italic>&#39;J&#39;</span>:
</span></span><span style=display:flex><span>				<span style=font-weight:700>if</span> p2 {
</span></span><span style=display:flex><span>					c.jokers += 1
</span></span><span style=display:flex><span>					x = 1
</span></span><span style=display:flex><span>				} <span style=font-weight:700>else</span> {
</span></span><span style=display:flex><span>					x = 11
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			<span style=font-weight:700>case</span> <span style=font-style:italic>&#39;T&#39;</span>:
</span></span><span style=display:flex><span>				x = 10
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>			c.hand = append(c.hand, x)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=font-weight:700>return</span> c
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-weight:700>func</span> (c *Card) String() <span>string</span> {
</span></span><span style=display:flex><span>	<span style=font-weight:700>return</span> fmt.Sprintf(<span style=font-style:italic>&#34;%v (%d)&#34;</span>, c.hand, c.bid)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-weight:700>func</span> main() {
</span></span><span style=display:flex><span>	content := aoc.AsLines(<span style=font-style:italic>&#34;2023/Day07/input.txt&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=font-weight:700>var</span> cards []*Card
</span></span><span style=display:flex><span>	<span style=font-weight:700>for</span> _, v := <span style=font-weight:700>range</span> content {
</span></span><span style=display:flex><span>		p := strings.Split(v, <span style=font-style:italic>&#34; &#34;</span>)
</span></span><span style=display:flex><span>		b, _ := strconv.Atoi(p[1])
</span></span><span style=display:flex><span>		c := NewCard(p[0], b, <span style=font-weight:700>false</span>)
</span></span><span style=display:flex><span>		cards = append(cards, c)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	startTime := time.Now()
</span></span><span style=display:flex><span>	lessFunc := <span style=font-weight:700>func</span>(i, j <span>int</span>) <span>bool</span> {
</span></span><span style=display:flex><span>		<span style=font-weight:700>if</span> cards[i].rank() == cards[j].rank() {
</span></span><span style=display:flex><span>			<span style=font-weight:700>return</span> cards[j].strongerThen(cards[i])
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=font-weight:700>return</span> cards[i].rank() &lt; cards[j].rank()
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	sort.Slice(cards, lessFunc)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	res := 0
</span></span><span style=display:flex><span>	<span style=font-weight:700>for</span> i, c := <span style=font-weight:700>range</span> cards {
</span></span><span style=display:flex><span>		res += (i + 1) * c.bid
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	endTime := time.Now()
</span></span><span style=display:flex><span>	elapsed := endTime.Sub(startTime)
</span></span><span style=display:flex><span>	<span style=font-weight:700>if</span> 251216224 != res {
</span></span><span style=display:flex><span>		panic(<span style=font-style:italic>&#34;Wrong answer&#34;</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	fmt.Printf(<span style=font-style:italic>&#34;Part 1: %d (%v)\n&#34;</span>, res, elapsed) <span style=font-style:italic>// 251216224
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>
</span></span><span style=display:flex><span>	cards = []*Card{}
</span></span><span style=display:flex><span>	<span style=font-weight:700>for</span> _, v := <span style=font-weight:700>range</span> content {
</span></span><span style=display:flex><span>		p := strings.Split(v, <span style=font-style:italic>&#34; &#34;</span>)
</span></span><span style=display:flex><span>		b, _ := strconv.Atoi(p[1])
</span></span><span style=display:flex><span>		c := NewCard(p[0], b, <span style=font-weight:700>true</span>)
</span></span><span style=display:flex><span>		cards = append(cards, c)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	startTime = time.Now()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	sort.Slice(cards, lessFunc)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	res = 0
</span></span><span style=display:flex><span>	<span style=font-weight:700>for</span> i, c := <span style=font-weight:700>range</span> cards {
</span></span><span style=display:flex><span>		res += (i + 1) * c.bid
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	endTime = time.Now()
</span></span><span style=display:flex><span>	elapsed = endTime.Sub(startTime)
</span></span><span style=display:flex><span>	<span style=font-weight:700>if</span> 250825971 != res {
</span></span><span style=display:flex><span>		panic(<span style=font-style:italic>&#34;Wrong part 2&#34;</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	fmt.Printf(<span style=font-style:italic>&#34;Part 2: %d (%v)\n&#34;</span>, res, elapsed) <span style=font-style:italic>// 250825971
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>}
</span></span></code></pre></div></div><div class=single-pagination><hr><div class=flex><div class=single-pagination-prev><div class=single-pagination-container-prev><div class=single-pagination-text>←</div><div class=single-pagination-text><a href=/posts/aoc-2023-day-6/>Advent of Code 2023 day 6</a></div></div></div><div class=single-pagination-next><div class=single-pagination-container-next><div class=single-pagination-text><a href=/posts/aoc-2023-day-8/>Advent of Code 2023 day 8</a></div><div class=single-pagination-text>→</div></div></div></div><hr></div><div class=back-to-top><a href=#top>back to top</a></div></div></main></div><footer><p>Powered by
<a href=https://gohugo.io/>Hugo</a>
and
<a href=https://github.com/tomfran/typo>tomfran/typo</a></p></footer></body><script>function isAuto(){return document.body.classList.contains("auto")}function setTheme(){if(!isAuto())return;document.body.classList.remove("auto");let e="light";window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark"),document.body.classList.add(e)}function invertBody(){document.body.classList.toggle("dark"),document.body.classList.toggle("light")}isAuto()&&window.matchMedia("(prefers-color-scheme: dark)").addListener(invertBody),setTheme()</script></html>