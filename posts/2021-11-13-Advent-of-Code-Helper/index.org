#+TITLE: Emacs Advent of Code helper
#+subtitle: Grab your input like a pro
#+options: toc:nil
#+date: <2021-11-13 Sat>

One step in solving the [[https://adventofcode.com][Advent of Code]] challenges is to grab the puzzle input. This step is easily automated within Emacs.

The following function reads the year and day from the input and then inserts the contents of the url into the current buffer. This works quite nicely. One improvement would still be to create a similar function to grab the puzzle input for *today*.

#+name: get-aoc-input function
#+begin_src emacs-lisp
  (defun get-aoc-input ()
    "Retrieve the input for a puzzle"
    (interactive)
    (let* ((year  (read-number "Year: "))
           (day   (read-number "Day: "))
           (creds (auth-source-search :host "adventofcode.com"))
           (secret (plist-get (car creds) :secret))
           (decoded (funcall secret))
           (url-request-extra-headers
            `(("Cookie" . ,(concat "session=" decoded))))
           )
      (url-insert-file-contents
       (format "https://adventofcode.com/%d/day/%d/input" year day))
      ))
#+end_src

In order for it to work it is required to grab the ~session~ cookie from the website, just hist ~F12~, scroll to ~storage~ and copy the hash you see there.

[[./images/storage.png]]

Add this ~hash~ to your ~.authinfo~ file.

#+begin_src 
machine adventofcode.com password 1234YOURHASHHERE
#+end_src

Emacs will now happily grab the input for you and insert it into the current buffer.
