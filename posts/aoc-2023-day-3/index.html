<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><link rel=icon type=image/ico href=https://www.arjenwiersma.nl//favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.arjenwiersma.nl//favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.arjenwiersma.nl//favicon-32x32.png><link rel=icon type=image/png sizes=192x192 href=https://www.arjenwiersma.nl//android-chrome-192x192.png><link rel=apple-touch-icon sizes=180x180 href=https://www.arjenwiersma.nl//apple-touch-icon.png><meta name=description content><meta property="og:image" content="https://www.arjenwiersma.nl/social.png"><title>Advent of Code 2023 Day 3 | Arjen Wiersma
</title><link rel=canonical href=https://www.arjenwiersma.nl/posts/aoc-2023-day-3/><link rel=stylesheet href=/assets/combined.min.a6824bbee0d90d5af09fed9b70395ce7076b615e315037455d903314e96ef91b.css media=all></head><body class=auto><div class=content><header><div class=header><h1 class=header-title>Arjen Wiersma</h1><div class=flex><p class=small><a href=/>/home</a></p><p class=small><a href=/posts>/posts</a></p><p class=small><a href=/tags>/tags</a></p></div></div></header><main class=main><div class=breadcrumbs><a href=/>Home</a>
<span class=breadcrumbs-separator>> </span><a href=/posts/>Posts</a>
<span class=breadcrumbs-separator>> </span><a class=breadcrumbs-current href=/posts/aoc-2023-day-3/>Advent of Code 2023 Day 3</a></div><div><div class=single-intro-container><h1 class=single-title>Advent of Code 2023 Day 3</h1><p class=single-readtime><time datetime=2023-12-03T12:38:00+01:00>3 Dec 2023</time></p></div><div class=single-content><p>Day 3 was quite something. I think that in an attempt to make it harder for AI to solve the puzzles the creators also increased the difficulty level of the base puzzles a little too much. The test was not very clear as to what should happen with negative numbers and it might trip people up. The puzzle itself is a great to exercise grid knowledge as you have to work with neighbors and you have to extend the numbers when you find them. Part 2 was just some bookkeeping on my existing implementation, so it was not too much work.</p><p>As a note; I first started out with a list of Points, keeping track of the numbers in a coordinate system. This failed miserably :).</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=font-weight:700>package</span> main
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-weight:700>import</span> (
</span></span><span style=display:flex><span>	<span style=font-style:italic>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=font-style:italic>&#34;arjenwiersma.nl/aoc/internal/aoc&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-weight:700>type</span> Point <span style=font-weight:700>struct</span> {
</span></span><span style=display:flex><span>	Y, X <span>int</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-weight:700>func</span> IsDigit(b <span>byte</span>) <span>bool</span> {
</span></span><span style=display:flex><span>	<span style=font-weight:700>return</span> b-<span style=font-style:italic>&#39;0&#39;</span> &gt;= 0 &amp;&amp; b-<span style=font-style:italic>&#39;0&#39;</span> &lt;= 9
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-weight:700>func</span> main() {
</span></span><span style=display:flex><span>	lines := aoc.AsLines(<span style=font-style:italic>&#34;2023/Day03/input.txt&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ygrid := len(lines)
</span></span><span style=display:flex><span>	xgrid := len(lines[0])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	grid := make([][]<span>byte</span>, ygrid)
</span></span><span style=display:flex><span>	<span style=font-weight:700>for</span> y, l := <span style=font-weight:700>range</span> lines {
</span></span><span style=display:flex><span>		grid[y] = make([]<span>byte</span>, xgrid)
</span></span><span style=display:flex><span>		<span style=font-weight:700>for</span> x := 0; x &lt; len(l); x++ {
</span></span><span style=display:flex><span>			grid[y][x] = l[x]
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	neighbors := [][]<span>int</span>{
</span></span><span style=display:flex><span>		{-1, -1}, {0, -1}, {1, -1},
</span></span><span style=display:flex><span>		{-1, 0}, {0, 0}, {1, 0},
</span></span><span style=display:flex><span>		{-1, 1}, {0, 1}, {1, 1},
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	gears := make(<span style=font-weight:700>map</span>[Point][]<span>int</span>)
</span></span><span style=display:flex><span>	sum := 0
</span></span><span style=display:flex><span>	<span style=font-weight:700>for</span> y := 0; y &lt; ygrid; y++ {
</span></span><span style=display:flex><span>		<span style=font-weight:700>for</span> x := 0; x &lt; xgrid; x++ {
</span></span><span style=display:flex><span>			num := 0
</span></span><span style=display:flex><span>			hasSymbol := <span style=font-weight:700>false</span>
</span></span><span style=display:flex><span>			isGear := <span style=font-weight:700>false</span>
</span></span><span style=display:flex><span>			<span style=font-weight:700>var</span> gearCoord Point
</span></span><span style=display:flex><span>			<span style=font-weight:700>for</span> IsDigit(grid[y][x]) {
</span></span><span style=display:flex><span>				num = num*10 + int(grid[y][x]-<span style=font-style:italic>&#39;0&#39;</span>)
</span></span><span style=display:flex><span>				<span style=font-weight:700>for</span> _, n := <span style=font-weight:700>range</span> neighbors {
</span></span><span style=display:flex><span>					<span style=font-weight:700>if</span> y+n[1] &gt;= 0 &amp;&amp; y+n[1] &lt; ygrid &amp;&amp;
</span></span><span style=display:flex><span>						x+n[0] &gt;= 0 &amp;&amp; x+n[0] &lt; xgrid {
</span></span><span style=display:flex><span>						v := grid[y+n[1]][x+n[0]]
</span></span><span style=display:flex><span>						<span style=font-weight:700>if</span> !IsDigit(v) &amp;&amp; v != <span style=font-style:italic>&#39;.&#39;</span> {
</span></span><span style=display:flex><span>							<span style=font-weight:700>if</span> v == <span style=font-style:italic>&#39;*&#39;</span> {
</span></span><span style=display:flex><span>								isGear = <span style=font-weight:700>true</span>
</span></span><span style=display:flex><span>								gearCoord = Point{X: x + n[0], Y: y + n[1]}
</span></span><span style=display:flex><span>							}
</span></span><span style=display:flex><span>							hasSymbol = <span style=font-weight:700>true</span>
</span></span><span style=display:flex><span>						}
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>				x += 1
</span></span><span style=display:flex><span>				<span style=font-weight:700>if</span> x &gt;= xgrid {
</span></span><span style=display:flex><span>					<span style=font-weight:700>break</span>
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>			<span style=font-weight:700>if</span> num &gt; 0 &amp;&amp; hasSymbol {
</span></span><span style=display:flex><span>				<span style=font-weight:700>if</span> isGear {
</span></span><span style=display:flex><span>					gears[gearCoord] = append(gears[gearCoord], num)
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>				sum += num
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	fmt.Println(<span style=font-style:italic>&#34;Part 1: &#34;</span>, sum) <span style=font-style:italic>// 498559
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>
</span></span><span style=display:flex><span>	sum = 0
</span></span><span style=display:flex><span>	<span style=font-weight:700>for</span> _, v := <span style=font-weight:700>range</span> gears {
</span></span><span style=display:flex><span>		<span style=font-weight:700>if</span> len(v) == 2 {
</span></span><span style=display:flex><span>			sum += v[0] * v[1]
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	fmt.Println(<span style=font-style:italic>&#34;Part 2: &#34;</span>, sum) <span style=font-style:italic>// 72246648
</span></span></span><span style=display:flex><span><span style=font-style:italic></span>}
</span></span></code></pre></div></div><div class=single-pagination><hr><div class=flex><div class=single-pagination-prev><div class=single-pagination-container-prev><div class=single-pagination-text>←</div><div class=single-pagination-text><a href=/posts/aoc-2023-day-2/>Advent of Code 2023 Day 2</a></div></div></div><div class=single-pagination-next><div class=single-pagination-container-next><div class=single-pagination-text><a href=/posts/aoc-2023-day-4/>Advent of Code 2023 Day 4</a></div><div class=single-pagination-text>→</div></div></div></div><hr></div><div class=back-to-top><a href=#top>back to top</a></div></div></main></div><footer><p>Powered by
<a href=https://gohugo.io/>Hugo</a>
and
<a href=https://github.com/tomfran/typo>tomfran/typo</a></p></footer></body><script>function isAuto(){return document.body.classList.contains("auto")}function setTheme(){if(!isAuto())return;document.body.classList.remove("auto");let e="light";window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark"),document.body.classList.add(e)}function invertBody(){document.body.classList.toggle("dark"),document.body.classList.toggle("light")}isAuto()&&window.matchMedia("(prefers-color-scheme: dark)").addListener(invertBody),setTheme()</script></html>